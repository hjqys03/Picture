############################################## - âš“ï¸ é”šç‚¹åŒºå¼€å§‹ - ##############################################
# é”šç‚¹ - ç­›é€‰ç»„
FilterSelect: &FilterSelect {filter: '^(?=.*(?i)(é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|HKG|å°æ¹¾|ğŸ‡¹ğŸ‡¼|TW|TWN|æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|JPN|ç¾å›½|ğŸ‡ºğŸ‡¸|US|USA))(?!.*(æ’é™¤1|æ’é™¤2)).*$'}
FilterOthers: &FilterOthers {filter: '^(?!.*(DIRECT|Traffic|TRAFFIC|Expire|EXPIRE|æµé‡|åˆ°æœŸ|æ—¶é—´|é‡ç½®))'}
# é”šç‚¹ - é€‰æ‹©ç»„
Select: &Select {type: select, include-all: true, proxies: ['Proxy','Direct','Auto']}
# é”šç‚¹ - è‡ªåŠ¨ç»„
UrlTest: &UrlTest {type: url-test, hidden: true, include-all: true}
# é”šç‚¹ - è§„åˆ™é›†
IPcidr: &IPcidr {type: http, interval: 86400, behavior: ipcidr, format: mrs}
Domain: &Domain {type: http, interval: 86400, behavior: domain, format: mrs}
# é”šç‚¹ - è¿œç¨‹è®¢é˜…ç»„
Providers: &Providers {type: http, interval: 86400, proxy: DIRECT, health-check: {enable: true, url: 'https://captive.apple.com/generate_204', interval: 600}, <<: *FilterOthers}
############################################## - âš“ï¸ é”šç‚¹åŒºç»“æŸ - ##############################################

# èŠ‚ç‚¹è®¢é˜…
proxy-providers:
  æœºåœº1: {<<: *Providers, url: 'ğŸ”—è®¢é˜…é“¾æ¥', path: ./providers/æœºåœº1.yaml, override: {additional-prefix: 'æœºåœº1 '}}
  æœºåœº2: {<<: *Providers, url: 'ğŸ”—è®¢é˜…é“¾æ¥', path: ./providers/æœºåœº2.yaml, override: {additional-prefix: 'æœºåœº2 '}}

# åŸºç¡€é…ç½®
port: 7890
socks-port: 7891
mixed-port: 7892
redir-port: 9797
tproxy-port: 9898
mode: rule
log-level: error
ipv6: false
allow-lan: false
bind-address: '*'
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome
find-process-mode: strict

# ç®¡ç†é¢æ¿é…ç½®
external-ui-url: 'https://ghfast.top/github.com/Zephyruso/zashboard/archive/gh-pages.zip'
external-ui: ./WebUI
external-controller: 0.0.0.0:9090
secret: 'Password'

# é…ç½®å­˜å‚¨
profile:
  store-selected: true
  store-fake-ip: true

# åŸŸåå—…æ¢é…ç½®
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: true
  sniff: {HTTP: {ports: [80, 8080-8880], override-destination: true}, TLS: {ports: [443, 8443]}, QUIC: {ports: [443, 8443]}}
  skip-domain: ['rule-set:Private_Domain']
  skip-src-address: ['rule-set:Private_ip']

# Hostsé…ç½®
hosts:
  mtalk.google.com: 142.250.107.188
  alt1-mtalk.google.com: 172.217.78.188
  alt2-mtalk.google.com: 142.250.101.188
  alt3-mtalk.google.com: 172.253.135.188
  alt4-mtalk.google.com: 172.217.74.188
  alt5-mtalk.google.com: 172.217.74.188
  alt6-mtalk.google.com: 74.125.27.188
  alt7-mtalk.google.com: 192.178.209.188
  alt8-mtalk.google.com: 192.178.152.188

# DNSé…ç½®
dns:
  enable: true
  ipv6: false
  prefer-h3: false
  use-hosts: false
  listen: 0.0.0.0:1053
  cache-algorithm: arc
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter: ['rule-set:Fakeip_Filter']
  default-nameserver: [223.5.5.5, 119.29.29.29]
  nameserver: ['https://dns.alidns.com/dns-query', 'https://doh.pub/dns-query']

# TUNæ¨¡å¼é…ç½®
tun:
  enable: true
  mtu: 9000
  stack: gvisor
  device: utun
  dns-hijack: ['any:53', 'tcp://any:53']
  auto-route: true
  strict-route: true
  auto-redirect: false
  auto-detect-interface: true

# ä»£ç†èŠ‚ç‚¹
proxies:
  - {name: 'ğŸŒ Direct', type: direct, udp: true}
  - {name: 'â›”ï¸ Reject', type: reject}

# ç­–ç•¥ç»„
proxy-groups:
  - {name: 'Proxy', <<: *Select, proxies: ['Auto'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Proxy.png'}
  - {name: 'Auto', <<: [*UrlTest, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Auto.png'}
  - {name: 'Telegram', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Orz-3/mini/raw/master/Color/Telegram.png'}
  - {name: 'Twitter', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Twitter.png'}
  - {name: 'Emby', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Orz-3/mini/raw/master/Color/Emby.png'}
  - {name: 'YouTube', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Orz-3/mini/raw/master/Color/YouTube.png'}
  - {name: 'EHentai', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/MissToT/Picture/raw/main/icon/Exhentai.png'}
  - {name: 'TikTok', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/TikTok.png'}
  - {name: 'AI', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/ChatGPT.png'}
  - {name: 'Games', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Game.png'}
  - {name: 'Japan', <<: *Select, filter: '^(?=.*(?i)(æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|JPN))(?!.*(æ’é™¤1|æ’é™¤2)).*$', icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Japan.png'}
  - {name: 'Taiwan', <<: *Select, filter: '^(?=.*(?i)(å°æ¹¾|ğŸ‡¹ğŸ‡¼|TW|TWN))(?!.*(æ’é™¤1|æ’é™¤2)).*$', icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Taiwan.png'}
  - {name: 'GoogleFCM', <<: [*Select, *FilterSelect], proxies: ['Proxy','ğŸŒ Direct','â›”ï¸ Reject'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Google_Search.png'}
  - {name: 'Direct', <<: [*Select, *FilterSelect], proxies: ['ğŸŒ Direct','â›”ï¸ Reject','Proxy'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Direct.png'}
  - {name: 'Adblock', <<: [*Select, *FilterSelect], proxies: ['â›”ï¸ Reject','ğŸŒ Direct','Proxy'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Reject.png'}
  - {name: 'Final', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Final.png'}
  - {name: 'GLOBAL', <<: [*Select, *FilterSelect], proxies: ['Proxy','GoogleFCM','Telegram','Twitter','Emby','YouTube','EHentai','TikTok','AI','Games','Japan','Taiwan','Direct','Adblock','Final'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Global.png'}

# è¿œç¨‹è§„åˆ™é›†
rule-providers:
  CN_ip: {<<: *IPcidr, url: 'https://ghfast.top/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/ipcidr/cn.mrs'}
  Proxy_ip: {<<: *IPcidr, url: 'https://ghfast.top/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/ipcidr/proxy.mrs'}
  Private_ip: {<<: *IPcidr, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/private.mrs'}
  Telegram_ip: {<<: *IPcidr, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/telegram.mrs'}
  Twitter_ip: {<<: *IPcidr, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/twitter.mrs'}
  Google_ip: {<<: *IPcidr, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/google.mrs'}
  Games_ip: {<<: *IPcidr, url: 'https://ghfast.top/github.com/MissToT/Picture/raw/Meta/ipcidr/Game.mrs'}
  CN_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/domain/cn.mrs'}
  Proxy_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/domain/proxy.mrs'}
  Private_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/private.mrs'}
  Telegram_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/telegram.mrs'}
  Twitter_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/twitter.mrs'}
  Google_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/google.mrs'}
  GoogleFCM_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/googlefcm.mrs'}
  Games_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MissToT/Picture/raw/Meta/Domain/Game.mrs'}
  AI_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/domain/ai.mrs'}
  Emby_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MissToT/Picture/raw/Meta/Domain/Emby.mrs'}
  Japan_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MissToT/Picture/raw/Meta/Domain/Japan.mrs'}
  Taiwan_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MissToT/Picture/raw/Meta/Domain/Taiwan.mrs'}
  China_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MissToT/Picture/raw/Meta/Domain/China.mrs'}
  TikTok_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/tiktok.mrs'}
  YouTube_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/youtube.mrs'}
  EHentai_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/ehentai.mrs'}
  Adblock_Domain: {<<: *Domain, url: 'https://ghfast.top/github.com/privacy-protection-tools/anti-ad.github.io/raw/master/docs/mihomo.mrs'}
  Fakeip_Filter: {<<: *Domain, url: 'https://ghfast.top/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/domain/fake-ip-filter.mrs'}

# è·¯ç”±è§„åˆ™
rules:
  - RULE-SET,Adblock_Domain,Adblock
  - RULE-SET,Private_Domain,DIRECT
  - RULE-SET,GoogleFCM_Domain,GoogleFCM
  - RULE-SET,Telegram_Domain,Telegram
  - RULE-SET,Twitter_Domain,Twitter
  - RULE-SET,TikTok_Domain,TikTok
  - RULE-SET,AI_Domain,AI
  - RULE-SET,YouTube_Domain,YouTube
  - RULE-SET,Emby_Domain,Emby
  - RULE-SET,EHentai_Domain,EHentai
  - RULE-SET,Games_Domain,Games
  - RULE-SET,Japan_Domain,Japan
  - RULE-SET,Taiwan_Domain,Taiwan
  - RULE-SET,China_Domain,Direct
  - RULE-SET,Google_Domain,Proxy
  - RULE-SET,CN_Domain,Direct
  - RULE-SET,Proxy_Domain,Proxy
  - RULE-SET,Private_ip,DIRECT,no-resolve
  - RULE-SET,Telegram_ip,Telegram,no-resolve
  - RULE-SET,Twitter_ip,Twitter,no-resolve
  - RULE-SET,Games_ip,Games,no-resolve
  - RULE-SET,Google_ip,Proxy,no-resolve
  - RULE-SET,CN_ip,Direct,no-resolve
  - RULE-SET,Proxy_ip,Proxy,no-resolve
  - MATCH,Final