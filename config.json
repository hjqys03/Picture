{
	"log": {
		"level": "error",
		"output": "sing-box.log", // sfa 删除此行
		"timestamp": true
	},
	"dns": {
		"servers": [
			{
				"tag": "cloudflare",
				"type": "tcp",
				"server": "1.1.1.1",
				"detour": "proxy"
			},
			{
				"tag": "dnspod",
				"type": "udp",
				"server": "119.29.29.29",
				"detour": "direct"
			},
			// 建议修改此 DNS
			{
				"tag": "default",
				"type": "udp",
				"server": "114.114.114.114",
				"detour": "direct"
			},
			{
				"tag": "alidns",
				"type": "udp",
				"server": "223.5.5.5"
			}
		],
		"rules": [
			{
				"action": "predefined",
				"clash_mode": "rule-block",
				"rule_set": [
					"domain-category-ads-all"
				],
				"rcode": "NXDOMAIN"
			},
			{
				"rule_set": [
					"domain-tiktok"
				],
				"server": "cloudflare"
			},
			{
				"domain_keyword": "ntp",
				"domain_regex": "(^|\\.)(alt[1-8]-mtalk|mtalk|mtalk4)\\.google\\.com$",
				"rule_set": [
					"domain-bytedance",
					"domain-microsoft@cn",
					"domain-cn",
					"domain-apple@cn",
					"domain-category-games@cn"
				],
				"server": "dnspod"
			}
		],
		"strategy": "prefer_ipv6",
		"final": "cloudflare",
		"reverse_mapping": true,
		"independent_cache": true
	},
	"inbounds": [
		{
			"type": "mixed",
			"tag": "mixed-in",
			"listen": "::",
			"listen_port": 12306
		},
		{
			"tag": "tun",
			"type": "tun",
			"interface_name": "sing-box",
			"address": [
				"172.18.0.1/16",
				"fdfe:dcba:9876::1/126"
			],
			"strict_route": true,
			"auto_route": true,
			"stack": "system",
			"sniff": true
		}
		/*
		// TProxy 入站
		{
			"type": "tproxy",
			"tag": "tproxy-in",
			"listen": "::",
			"listen_port": 1536
		}
		*/
	],
	"outbounds": [
		{
			"type": "direct",
			"tag": "direct",
			"domain_resolver": "dnspod"
		},
		{
			"type": "selector",
			"tag": "proxy",
			"outbounds": [
				"Local",
				"Remote"
			]
		},
		{
			"type": "selector",
			"tag": "Local",
			"providers": [
				"XiReiki Local"
			]
		},
		{
			"type": "selector",
			"tag": "Remote",
			"providers": [
				"XiReiki Remote"
			]
		}
	],
	"route": {
		"rules": [
			{
				"action": "resolve",
				"strategy": "prefer_ipv6"
			},
			{
				"action": "sniff"
			},
			{
				"protocol": "dns",
				"action": "hijack-dns"
			},
			{
				"clash_mode": "rule-block",
				"rule_set": "domain-category-ads-all",
				"action": "reject"
			},
			{
				"clash_mode": "direct",
				"outbound": "direct"
			},
			{
				"clash_mode": "global",
				"outbound": "proxy"
			},
			{
				"ip_is_private": true,
				"outbound": "direct"
			},
			{
				"rule_set": [
					"domain-apple@cn",
					"domain-category-games@cn",
					"domain-cn"
				],
				"outbound": "direct"
			},
			{
				"rule_set": [
					"ip-cn"
				],
				"outbound": "direct"
			}
		],
		"rule_set": [
			{
				"tag": "ip-cn",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/MetaCubeX/meta-rules-dat/raw/sing/geo/geoip/cn.srs",
				"format": "binary"
			},
			{
				"tag": "ip-private",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/MetaCubeX/meta-rules-dat/raw/sing/geo/geoip/private.srs",
				"format": "binary"
			},
			{
				"tag": "domain-bytedance",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/MetaCubeX/meta-rules-dat/raw/sing/geo/geosite/bytedance.srs",
				"format": "binary"
			},
			{
				"tag": "domain-microsoft@cn",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/MetaCubeX/meta-rules-dat/raw/sing/geo/geosite/microsoft@cn.srs",
				"format": "binary"
			},
			{
				"tag": "domain-apple@cn",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/MetaCubeX/meta-rules-dat/raw/sing/geo/geosite/apple@cn.srs",
				"format": "binary"
			},
			{
				"tag": "domain-category-games@cn",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/MetaCubeX/meta-rules-dat/raw/sing/geo/geosite/category-games@cn.srs",
				"format": "binary"
			},
			{
				"tag": "domain-category-ads-all",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/Yuu518/sing-box-rules/raw/rule_set/rule_set_site/category-ads-all.srs",
				"format": "binary"
			},
			{
				"tag": "domain-cn",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/MetaCubeX/meta-rules-dat/raw/sing/geo/geosite/cn.srs",
				"format": "binary"
			},
			{
				"tag": "domain-tiktok",
				"type": "remote",
				"update_interval": "24h",
				"download_detour": "proxy",
				"url": "https://github.com/Yuu518/sing-box-rules/raw/rule_set/rule_set_site/tiktok.srs",
				"format": "binary"
			}
		],
		"default_domain_resolver": {
			"server": "default"
		},
		"auto_detect_interface": true,
		// "default_mark": 233, // TPRoxy 取消注释
		"find_process": true,
		"final": "proxy"
	},
	"experimental": {
		"clash_api": {
			"external_controller": "127.0.0.1:9909",
			"external_ui": "dashboard", // 请自定义前端面板文件夹
			"default_mode": "rule"
		},
		"cache_file": {
			"enabled": true,
			"path": "cache.db",
			"store_fakeip": false
		},
		// 统一延迟，更好看，无实际作用
		"urltest_unified_delay": true
	},
	"outbound_providers": [
		// 本地订阅示例
		{
			"type": "local",
			"tag": "XiReiki Local",
			"path": "XiReiki.json",
			"outbound_override": {
				// 出站覆盖字段
				"tcp_fast_open": false
			}
		},
		// 远程订阅示例
		{
			"type": "remote",
			"tag": "XiReiki Remote",
			"download_url": "https://www.baidu.com", // 订阅链接
			"path": "Remote.json",
			"outbound_override": {
				// 出站覆盖字段
				"tcp_fast_open": false
			}
		}
	]
}