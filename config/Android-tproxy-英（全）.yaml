############################################## - âš“ï¸ é”šç‚¹åŒºå¼€å§‹ - ##############################################
# é”šç‚¹ - ç­›é€‰ç»„
FilterSelect: &FilterSelect {filter: '^(?=.*(?i)(é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|HKG|å°æ¹¾|ğŸ‡¹ğŸ‡¼|TW|TWN|æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|JPN|ç¾å›½|ğŸ‡ºğŸ‡¸|US|USA))(?!.*(2.00x|æ’é™¤2)).*$'}
FilterOthers: &FilterOthers {filter: '^(?!.*(DIRECT|Traffic|TRAFFIC|Expire|EXPIRE|æµé‡|åˆ°æœŸ|æ—¶é—´|é‡ç½®))'}
FilterHK: &FilterHK {filter: '^(?=.*(?i)(é¦™æ¸¯|ğŸ‡­ğŸ‡°|HK|HKG))(?!.*(2.00x|æ’é™¤2)).*$'}
FilterTW: &FilterTW {filter: '^(?=.*(?i)(å°æ¹¾|ğŸ‡¹ğŸ‡¼|TW|TWN))(?!.*(2.00x|æ’é™¤2)).*$'}
FilterJP: &FilterJP {filter: '^(?=.*(?i)(æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|JP|JPN))(?!.*(2.00x|æ’é™¤2)).*$'}
FilterUS: &FilterUS {filter: '^(?=.*(?i)(ç¾å›½|ğŸ‡ºğŸ‡¸|US|USA))(?!.*(2.00x|æ’é™¤2)).*$'}
# é”šç‚¹ - é€‰æ‹©ç»„
Select: &Select {type: select, include-all-providers: true, proxies: ['Proxy', 'Auto', 'AutoHK', 'AutoTW', 'AutoJP', 'AutoUS', 'ğŸŒ Direct', 'â›”ï¸ Reject']}
# é”šç‚¹ - è‡ªåŠ¨ç»„
UrlTest: &UrlTest {type: url-test, hidden: true, use: ['SNTP']}
# é”šç‚¹ - è§„åˆ™é›†
IPCIDR: &IPCIDR {type: http, interval: 86400, behavior: ipcidr, format: mrs}
Domain: &Domain {type: http, interval: 86400, behavior: domain, format: mrs}
Classical: &Classical {type: http, interval: 86400, behavior: classical, format: text}
# é”šç‚¹ - è¿œç¨‹è®¢é˜…ç»„
Providers: &Providers {type: http, interval: 86400, proxy: DIRECT, health-check: {enable: true, url: 'https://captive.apple.com/generate_204', interval: 600}, <<: *FilterOthers}
############################################## - âš“ï¸ é”šç‚¹åŒºç»“æŸ - ##############################################

# èŠ‚ç‚¹è®¢é˜…
proxy-providers:
  SNTP: {<<: *Providers, url: 'http://127.0.0.1:3000/download/SNTP', path: ./providers/SNTP.yaml, override: {additional-prefix: 'STP '}}
  SakuraCat: {<<: *Providers, url: 'http://127.0.0.1:3000/download/SakuraCat', path: ./providers/SakuraCat.yaml, override: {additional-prefix: 'SC '}}

# åŸºç¡€é…ç½®
mixed-port: 7890
redir-port: 9797
tproxy-port: 9898
mode: rule
log-level: silent
ipv6: true
allow-lan: true
bind-address: '*'
unified-delay: true
tcp-concurrent: true
find-process-mode: strict

# ç®¡ç†é¢æ¿é…ç½®
external-ui-url: 'https://v6.gh-proxy.com/github.com/Zephyruso/zashboard/releases/download/v1.101.1/dist.zip'
external-ui: ./WebUI
external-controller: 0.0.0.0:9090
secret: ''

# ç¼“å­˜é…ç½®
profile:
  store-selected: true
  store-fake-ip: true

# åŸŸåå—…æ¢é…ç½®
sniffer:
  enable: true
  force-dns-mapping: true
  parse-pure-ip: true
  override-destination: false
  sniff: {HTTP: {ports: [80, 8080-8880], override-destination: true}, TLS: {ports: [443, 8443]}, QUIC: {ports: [443, 8443]}}
  skip-domain: ['RULE-SET:Private_Domain']

# Hostsé…ç½®
hosts:
  mtalk.google.com: 142.250.107.188
  alt1-mtalk.google.com: 172.217.78.188
  alt2-mtalk.google.com: 192.178.164.188
  alt3-mtalk.google.com: 172.253.135.188
  alt4-mtalk.google.com: 172.217.74.188
  alt5-mtalk.google.com: 172.217.74.188
  alt6-mtalk.google.com: 74.125.27.188
  alt7-mtalk.google.com: 192.178.209.188
  alt8-mtalk.google.com: 192.178.152.188

# DNSé…ç½®
dns:
  enable: true
  ipv6: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  cache-algorithm: arc
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: rule
  fake-ip-filter: ['RULE-SET,Fakeip-Filter,real-ip', 'RULE-SET,Private_Domain,real-ip', 'RULE-SET,China_Domain,real-ip', 'RULE-SET,CN_Domain,real-ip', 'MATCH,fake-ip']
  default-nameserver: [223.5.5.5, 119.29.29.29]
  nameserver: ['https://dns.alidns.com/dns-query', 'https://doh.pub/dns-query']

# TUNæ¨¡å¼é…ç½®
tun:
  enable: false
  mtu: 9000
  stack: gvisor
  device: Meta
  dns-hijack: ['any:53', 'tcp://any:53']
  auto-route: true
  strict-route: true
  auto-redirect: false
  auto-detect-interface: true

# å‡ºç«™èŠ‚ç‚¹
proxies:
  - {name: 'ğŸŒ Direct', type: direct, udp: true}
  - {name: 'â›”ï¸ Reject', type: reject}
  - {name: 'ğŸ”° DNS-Hijack', type: dns}

# ç­–ç•¥ç»„
proxy-groups:
  - {name: 'Auto', <<: *UrlTest, include-all-providers: true, icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Auto.png'}
  - {name: 'AutoHK', <<: [*UrlTest, *FilterHK], icon: 'https://gh-proxy.com/github.com/MissToT/Picture/raw/main/icon/HK.svg'}
  - {name: 'AutoTW', <<: [*UrlTest, *FilterTW], icon: 'https://gh-proxy.com/github.com/MissToT/Picture/raw/main/icon/TW.svg'}
  - {name: 'AutoJP', <<: [*UrlTest, *FilterJP], icon: 'https://gh-proxy.com/github.com/MissToT/Picture/raw/main/icon/JP.svg'}
  - {name: 'AutoUS', <<: [*UrlTest, *FilterUS], icon: 'https://gh-proxy.com/github.com/MissToT/Picture/raw/main/icon/US.svg'}
  - {name: 'Proxy', <<: *Select, proxies: ['Auto', 'AutoHK', 'AutoTW', 'AutoJP', 'AutoUS', 'ğŸŒ Direct', 'â›”ï¸ Reject'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Proxy.png'}
  - {name: 'EHentai', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/MissToT/Picture/raw/main/icon/Exhentai.svg'}
  - {name: 'Telegram', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Orz-3/mini/raw/master/Color/Telegram.png'}
  - {name: 'Twitter', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Twitter.png'}
  - {name: 'Emby', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Orz-3/mini/raw/master/Color/Emby.png'}
  - {name: 'YouTube', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Orz-3/mini/raw/master/Color/YouTube.png'}
  - {name: 'TikTok', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/TikTok.png'}
  - {name: 'GoogleFCM', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Google_Search.png'}
  - {name: 'AI', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/ChatGPT.png'}
  - {name: 'Games', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Game.png'}
  - {name: 'Japan', <<: [*Select, *FilterJP], proxies: ['AutoJP', 'Proxy', 'ğŸŒ Direct', 'â›”ï¸ Reject'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Japan.png'}
  - {name: 'Taiwan', <<: [*Select, *FilterTW], proxies: ['AutoTW', 'Proxy', 'ğŸŒ Direct', 'â›”ï¸ Reject'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Taiwan.png'}
  - {name: 'WebRTC', <<: [*Select, *FilterSelect], proxies: ['Proxy', 'Auto', 'ğŸŒ Direct', 'â›”ï¸ Reject', 'REJECT-DROP', 'PASS'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Domestic.png'}
  - {name: 'Adblock', <<: [*Select, *FilterSelect], proxies: ['Proxy', 'Auto', 'ğŸŒ Direct', 'â›”ï¸ Reject', 'REJECT-DROP', 'PASS'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Hijacking.png'}
  - {name: 'Direct', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Direct.png'}
  - {name: 'Final', <<: [*Select, *FilterSelect], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Final.png'}
  - {name: 'GLOBAL', <<: [*Select, *FilterSelect], proxies: ['Proxy', 'EHentai', 'Telegram', 'Twitter', 'Emby', 'YouTube', 'TikTok', 'GoogleFCM', 'AI', 'Games', 'Japan', 'Taiwan', 'WebRTC', 'Adblock', 'Direct', 'Final'], icon: 'https://gh-proxy.com/github.com/Koolson/Qure/raw/master/IconSet/Color/Global.png'}

# è§„åˆ™é›†
rule-providers:
  CN_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/ipcidr/cn.mrs'}
  Proxy_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/ipcidr/proxy.mrs'}
  Private_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/private.mrs'}
  Telegram_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/telegram.mrs'}
  Twitter_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/twitter.mrs'}
  Google_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geoip/google.mrs'}
  Games_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/ipcidr/Game.mrs'}
  China_IP: {<<: *IPCIDR, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/ipcidr/China.mrs'}
  CN_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/domain/cn.mrs'}
  Proxy_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/domain/proxy.mrs'}
  Private_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/private.mrs'}
  Telegram_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/telegram.mrs'}
  Twitter_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/twitter.mrs'}
  Google_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/google.mrs'}
  GoogleFCM_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/googlefcm.mrs'}
  Games_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/Domain/Game.mrs'}
  AI_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/Domain/ai.mrs'}
  Emby_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/Domain/Emby.mrs'}
  Japan_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/Domain/Japan.mrs'}
  Taiwan_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/Domain/Taiwan.mrs'}
  China_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/Domain/China.mrs'}
  TikTok_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/tiktok.mrs'}
  YouTube_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/youtube.mrs'}
  EHentai_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/MetaCubeX/meta-rules-dat/raw/meta/geo/geosite/ehentai.mrs'}
  Adblock_Domain: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/privacy-protection-tools/anti-ad.github.io/raw/master/docs/mihomo.mrs'}
  Fakeip-Filter: {<<: *Domain, url: 'https://v6.gh-proxy.com/github.com/QuixoticHeart/rule-set/raw/ruleset/meta/domain/fake-ip-filter.mrs'}
  WebRTC: {<<: *Classical, url: 'https://v6.gh-proxy.com/github.com/MissToT/Picture/raw/Meta/classical/WebRTC.list'}

# è·¯ç”±è§„åˆ™
rules:
  - DST-PORT,53,ğŸ”° DNS-Hijack
  - RULE-SET,WebRTC,WebRTC
  - RULE-SET,Adblock_Domain,Adblock
  - RULE-SET,Private_Domain,DIRECT
  - RULE-SET,GoogleFCM_Domain,GoogleFCM
  - RULE-SET,Telegram_Domain,Telegram
  - RULE-SET,Twitter_Domain,Twitter
  - RULE-SET,TikTok_Domain,TikTok
  - RULE-SET,AI_Domain,AI
  - RULE-SET,YouTube_Domain,YouTube
  - RULE-SET,Emby_Domain,Emby
  - RULE-SET,EHentai_Domain,EHentai
  - RULE-SET,Games_Domain,Games
  - RULE-SET,Japan_Domain,Japan
  - RULE-SET,Taiwan_Domain,Taiwan
  - RULE-SET,China_Domain,Direct
  - RULE-SET,Google_Domain,Proxy
  - RULE-SET,Proxy_Domain,Proxy
  - RULE-SET,CN_Domain,Direct
  - RULE-SET,Private_IP,DIRECT,no-resolve
  - RULE-SET,Telegram_IP,Telegram,no-resolve
  - RULE-SET,Twitter_IP,Twitter,no-resolve
  - RULE-SET,Games_IP,Games,no-resolve
  - RULE-SET,China_IP,Direct,no-resolve
  - RULE-SET,Google_IP,Proxy,no-resolve
  - RULE-SET,Proxy_IP,Proxy,no-resolve
  - RULE-SET,CN_IP,Direct,no-resolve
  - MATCH,Final